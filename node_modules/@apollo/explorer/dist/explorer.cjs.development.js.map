{"version":3,"file":"explorer.cjs.development.js","sources":["../src/helpers/constants.ts","../node_modules/regenerator-runtime/runtime.js","../src/helpers/postMessageRelayHelpers.ts","../src/embeddedExplorer/setupEmbedRelay.ts","../src/embeddedExplorer/EmbeddedExplorer.ts","../src/embeddedExplorer/react/index.tsx"],"sourcesContent":["// Test urls for QA against staging. These will need to be updated\n// for every change\nexport const EMBEDDABLE_EXPLORER_URL_STAGING =\n  'https://deploy-preview-6300--embeddable-explorer.netlify.app/';\nexport const EMBEDDABLE_SANDBOX_URL_STAGING =\n  'https://deploy-preview-6300--embeddable-sandbox.netlify.app//sandbox/explorer';\n\n// URL for any embedded Explorer iframe\nexport const EMBEDDABLE_EXPLORER_URL =\n  'https://explorer.embed.apollographql.com';\nexport const EMBEDDABLE_SANDBOX_URL =\n  'https://sandbox.embed.apollographql.com/sandbox/explorer';\n\n// Message types for Explorer state\nexport const EXPLORER_LISTENING_FOR_SCHEMA = 'ExplorerListeningForSchema';\nexport const EXPLORER_LISTENING_FOR_STATE = 'ExplorerListeningForState';\nexport const SET_OPERATION = 'SetOperation';\nexport const SCHEMA_ERROR = 'SchemaError';\nexport const SCHEMA_RESPONSE = 'SchemaResponse';\n\n// Message types for queries and mutations\nexport const EXPLORER_QUERY_MUTATION_REQUEST = 'ExplorerRequest';\nexport const EXPLORER_QUERY_MUTATION_RESPONSE = 'ExplorerResponse';\n\n// Message types for subscriptions\nexport const EXPLORER_SUBSCRIPTION_REQUEST = 'ExplorerSubscriptionRequest';\nexport const EXPLORER_SUBSCRIPTION_RESPONSE = 'ExplorerSubscriptionResponse';\nexport const EXPLORER_SUBSCRIPTION_TERMINATION =\n  'ExplorerSubscriptionTermination';\nexport const IFRAME_DOM_ID = (uniqueId: number) => `apollo-embed-${uniqueId}`;\n\n// Message types for authentication\nexport const EXPLORER_LISTENING_FOR_HANDSHAKE = 'ExplorerListeningForHandshake';\nexport const HANDSHAKE_RESPONSE = 'HandshakeResponse';\nexport const SET_PARTIAL_AUTHENTICATION_TOKEN_FOR_PARENT =\n  'SetPartialAuthenticationTokenForParent';\nexport const EXPLORER_LISTENING_FOR_PARTIAL_TOKEN =\n  'ExplorerListeningForPartialToken';\nexport const PARTIAL_AUTHENTICATION_TOKEN_RESPONSE =\n  'PartialAuthenticationTokenResponse';\nexport const INTROSPECTION_QUERY_WITH_HEADERS = 'IntrospectionQueryWithHeaders';\n","/**\n * Copyright (c) 2014-present, Facebook, Inc.\n *\n * This source code is licensed under the MIT license found in the\n * LICENSE file in the root directory of this source tree.\n */\n\nvar runtime = (function (exports) {\n  \"use strict\";\n\n  var Op = Object.prototype;\n  var hasOwn = Op.hasOwnProperty;\n  var undefined; // More compressible than void 0.\n  var $Symbol = typeof Symbol === \"function\" ? Symbol : {};\n  var iteratorSymbol = $Symbol.iterator || \"@@iterator\";\n  var asyncIteratorSymbol = $Symbol.asyncIterator || \"@@asyncIterator\";\n  var toStringTagSymbol = $Symbol.toStringTag || \"@@toStringTag\";\n\n  function define(obj, key, value) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n    return obj[key];\n  }\n  try {\n    // IE 8 has a broken Object.defineProperty that only works on DOM objects.\n    define({}, \"\");\n  } catch (err) {\n    define = function(obj, key, value) {\n      return obj[key] = value;\n    };\n  }\n\n  function wrap(innerFn, outerFn, self, tryLocsList) {\n    // If outerFn provided and outerFn.prototype is a Generator, then outerFn.prototype instanceof Generator.\n    var protoGenerator = outerFn && outerFn.prototype instanceof Generator ? outerFn : Generator;\n    var generator = Object.create(protoGenerator.prototype);\n    var context = new Context(tryLocsList || []);\n\n    // The ._invoke method unifies the implementations of the .next,\n    // .throw, and .return methods.\n    generator._invoke = makeInvokeMethod(innerFn, self, context);\n\n    return generator;\n  }\n  exports.wrap = wrap;\n\n  // Try/catch helper to minimize deoptimizations. Returns a completion\n  // record like context.tryEntries[i].completion. This interface could\n  // have been (and was previously) designed to take a closure to be\n  // invoked without arguments, but in all the cases we care about we\n  // already have an existing method we want to call, so there's no need\n  // to create a new function object. We can even get away with assuming\n  // the method takes exactly one argument, since that happens to be true\n  // in every case, so we don't have to touch the arguments object. The\n  // only additional allocation required is the completion record, which\n  // has a stable shape and so hopefully should be cheap to allocate.\n  function tryCatch(fn, obj, arg) {\n    try {\n      return { type: \"normal\", arg: fn.call(obj, arg) };\n    } catch (err) {\n      return { type: \"throw\", arg: err };\n    }\n  }\n\n  var GenStateSuspendedStart = \"suspendedStart\";\n  var GenStateSuspendedYield = \"suspendedYield\";\n  var GenStateExecuting = \"executing\";\n  var GenStateCompleted = \"completed\";\n\n  // Returning this object from the innerFn has the same effect as\n  // breaking out of the dispatch switch statement.\n  var ContinueSentinel = {};\n\n  // Dummy constructor functions that we use as the .constructor and\n  // .constructor.prototype properties for functions that return Generator\n  // objects. For full spec compliance, you may wish to configure your\n  // minifier not to mangle the names of these two functions.\n  function Generator() {}\n  function GeneratorFunction() {}\n  function GeneratorFunctionPrototype() {}\n\n  // This is a polyfill for %IteratorPrototype% for environments that\n  // don't natively support it.\n  var IteratorPrototype = {};\n  define(IteratorPrototype, iteratorSymbol, function () {\n    return this;\n  });\n\n  var getProto = Object.getPrototypeOf;\n  var NativeIteratorPrototype = getProto && getProto(getProto(values([])));\n  if (NativeIteratorPrototype &&\n      NativeIteratorPrototype !== Op &&\n      hasOwn.call(NativeIteratorPrototype, iteratorSymbol)) {\n    // This environment has a native %IteratorPrototype%; use it instead\n    // of the polyfill.\n    IteratorPrototype = NativeIteratorPrototype;\n  }\n\n  var Gp = GeneratorFunctionPrototype.prototype =\n    Generator.prototype = Object.create(IteratorPrototype);\n  GeneratorFunction.prototype = GeneratorFunctionPrototype;\n  define(Gp, \"constructor\", GeneratorFunctionPrototype);\n  define(GeneratorFunctionPrototype, \"constructor\", GeneratorFunction);\n  GeneratorFunction.displayName = define(\n    GeneratorFunctionPrototype,\n    toStringTagSymbol,\n    \"GeneratorFunction\"\n  );\n\n  // Helper for defining the .next, .throw, and .return methods of the\n  // Iterator interface in terms of a single ._invoke method.\n  function defineIteratorMethods(prototype) {\n    [\"next\", \"throw\", \"return\"].forEach(function(method) {\n      define(prototype, method, function(arg) {\n        return this._invoke(method, arg);\n      });\n    });\n  }\n\n  exports.isGeneratorFunction = function(genFun) {\n    var ctor = typeof genFun === \"function\" && genFun.constructor;\n    return ctor\n      ? ctor === GeneratorFunction ||\n        // For the native GeneratorFunction constructor, the best we can\n        // do is to check its .name property.\n        (ctor.displayName || ctor.name) === \"GeneratorFunction\"\n      : false;\n  };\n\n  exports.mark = function(genFun) {\n    if (Object.setPrototypeOf) {\n      Object.setPrototypeOf(genFun, GeneratorFunctionPrototype);\n    } else {\n      genFun.__proto__ = GeneratorFunctionPrototype;\n      define(genFun, toStringTagSymbol, \"GeneratorFunction\");\n    }\n    genFun.prototype = Object.create(Gp);\n    return genFun;\n  };\n\n  // Within the body of any async function, `await x` is transformed to\n  // `yield regeneratorRuntime.awrap(x)`, so that the runtime can test\n  // `hasOwn.call(value, \"__await\")` to determine if the yielded value is\n  // meant to be awaited.\n  exports.awrap = function(arg) {\n    return { __await: arg };\n  };\n\n  function AsyncIterator(generator, PromiseImpl) {\n    function invoke(method, arg, resolve, reject) {\n      var record = tryCatch(generator[method], generator, arg);\n      if (record.type === \"throw\") {\n        reject(record.arg);\n      } else {\n        var result = record.arg;\n        var value = result.value;\n        if (value &&\n            typeof value === \"object\" &&\n            hasOwn.call(value, \"__await\")) {\n          return PromiseImpl.resolve(value.__await).then(function(value) {\n            invoke(\"next\", value, resolve, reject);\n          }, function(err) {\n            invoke(\"throw\", err, resolve, reject);\n          });\n        }\n\n        return PromiseImpl.resolve(value).then(function(unwrapped) {\n          // When a yielded Promise is resolved, its final value becomes\n          // the .value of the Promise<{value,done}> result for the\n          // current iteration.\n          result.value = unwrapped;\n          resolve(result);\n        }, function(error) {\n          // If a rejected Promise was yielded, throw the rejection back\n          // into the async generator function so it can be handled there.\n          return invoke(\"throw\", error, resolve, reject);\n        });\n      }\n    }\n\n    var previousPromise;\n\n    function enqueue(method, arg) {\n      function callInvokeWithMethodAndArg() {\n        return new PromiseImpl(function(resolve, reject) {\n          invoke(method, arg, resolve, reject);\n        });\n      }\n\n      return previousPromise =\n        // If enqueue has been called before, then we want to wait until\n        // all previous Promises have been resolved before calling invoke,\n        // so that results are always delivered in the correct order. If\n        // enqueue has not been called before, then it is important to\n        // call invoke immediately, without waiting on a callback to fire,\n        // so that the async generator function has the opportunity to do\n        // any necessary setup in a predictable way. This predictability\n        // is why the Promise constructor synchronously invokes its\n        // executor callback, and why async functions synchronously\n        // execute code before the first await. Since we implement simple\n        // async functions in terms of async generators, it is especially\n        // important to get this right, even though it requires care.\n        previousPromise ? previousPromise.then(\n          callInvokeWithMethodAndArg,\n          // Avoid propagating failures to Promises returned by later\n          // invocations of the iterator.\n          callInvokeWithMethodAndArg\n        ) : callInvokeWithMethodAndArg();\n    }\n\n    // Define the unified helper method that is used to implement .next,\n    // .throw, and .return (see defineIteratorMethods).\n    this._invoke = enqueue;\n  }\n\n  defineIteratorMethods(AsyncIterator.prototype);\n  define(AsyncIterator.prototype, asyncIteratorSymbol, function () {\n    return this;\n  });\n  exports.AsyncIterator = AsyncIterator;\n\n  // Note that simple async functions are implemented on top of\n  // AsyncIterator objects; they just return a Promise for the value of\n  // the final result produced by the iterator.\n  exports.async = function(innerFn, outerFn, self, tryLocsList, PromiseImpl) {\n    if (PromiseImpl === void 0) PromiseImpl = Promise;\n\n    var iter = new AsyncIterator(\n      wrap(innerFn, outerFn, self, tryLocsList),\n      PromiseImpl\n    );\n\n    return exports.isGeneratorFunction(outerFn)\n      ? iter // If outerFn is a generator, return the full iterator.\n      : iter.next().then(function(result) {\n          return result.done ? result.value : iter.next();\n        });\n  };\n\n  function makeInvokeMethod(innerFn, self, context) {\n    var state = GenStateSuspendedStart;\n\n    return function invoke(method, arg) {\n      if (state === GenStateExecuting) {\n        throw new Error(\"Generator is already running\");\n      }\n\n      if (state === GenStateCompleted) {\n        if (method === \"throw\") {\n          throw arg;\n        }\n\n        // Be forgiving, per 25.3.3.3.3 of the spec:\n        // https://people.mozilla.org/~jorendorff/es6-draft.html#sec-generatorresume\n        return doneResult();\n      }\n\n      context.method = method;\n      context.arg = arg;\n\n      while (true) {\n        var delegate = context.delegate;\n        if (delegate) {\n          var delegateResult = maybeInvokeDelegate(delegate, context);\n          if (delegateResult) {\n            if (delegateResult === ContinueSentinel) continue;\n            return delegateResult;\n          }\n        }\n\n        if (context.method === \"next\") {\n          // Setting context._sent for legacy support of Babel's\n          // function.sent implementation.\n          context.sent = context._sent = context.arg;\n\n        } else if (context.method === \"throw\") {\n          if (state === GenStateSuspendedStart) {\n            state = GenStateCompleted;\n            throw context.arg;\n          }\n\n          context.dispatchException(context.arg);\n\n        } else if (context.method === \"return\") {\n          context.abrupt(\"return\", context.arg);\n        }\n\n        state = GenStateExecuting;\n\n        var record = tryCatch(innerFn, self, context);\n        if (record.type === \"normal\") {\n          // If an exception is thrown from innerFn, we leave state ===\n          // GenStateExecuting and loop back for another invocation.\n          state = context.done\n            ? GenStateCompleted\n            : GenStateSuspendedYield;\n\n          if (record.arg === ContinueSentinel) {\n            continue;\n          }\n\n          return {\n            value: record.arg,\n            done: context.done\n          };\n\n        } else if (record.type === \"throw\") {\n          state = GenStateCompleted;\n          // Dispatch the exception by looping back around to the\n          // context.dispatchException(context.arg) call above.\n          context.method = \"throw\";\n          context.arg = record.arg;\n        }\n      }\n    };\n  }\n\n  // Call delegate.iterator[context.method](context.arg) and handle the\n  // result, either by returning a { value, done } result from the\n  // delegate iterator, or by modifying context.method and context.arg,\n  // setting context.delegate to null, and returning the ContinueSentinel.\n  function maybeInvokeDelegate(delegate, context) {\n    var method = delegate.iterator[context.method];\n    if (method === undefined) {\n      // A .throw or .return when the delegate iterator has no .throw\n      // method always terminates the yield* loop.\n      context.delegate = null;\n\n      if (context.method === \"throw\") {\n        // Note: [\"return\"] must be used for ES3 parsing compatibility.\n        if (delegate.iterator[\"return\"]) {\n          // If the delegate iterator has a return method, give it a\n          // chance to clean up.\n          context.method = \"return\";\n          context.arg = undefined;\n          maybeInvokeDelegate(delegate, context);\n\n          if (context.method === \"throw\") {\n            // If maybeInvokeDelegate(context) changed context.method from\n            // \"return\" to \"throw\", let that override the TypeError below.\n            return ContinueSentinel;\n          }\n        }\n\n        context.method = \"throw\";\n        context.arg = new TypeError(\n          \"The iterator does not provide a 'throw' method\");\n      }\n\n      return ContinueSentinel;\n    }\n\n    var record = tryCatch(method, delegate.iterator, context.arg);\n\n    if (record.type === \"throw\") {\n      context.method = \"throw\";\n      context.arg = record.arg;\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    var info = record.arg;\n\n    if (! info) {\n      context.method = \"throw\";\n      context.arg = new TypeError(\"iterator result is not an object\");\n      context.delegate = null;\n      return ContinueSentinel;\n    }\n\n    if (info.done) {\n      // Assign the result of the finished delegate to the temporary\n      // variable specified by delegate.resultName (see delegateYield).\n      context[delegate.resultName] = info.value;\n\n      // Resume execution at the desired location (see delegateYield).\n      context.next = delegate.nextLoc;\n\n      // If context.method was \"throw\" but the delegate handled the\n      // exception, let the outer generator proceed normally. If\n      // context.method was \"next\", forget context.arg since it has been\n      // \"consumed\" by the delegate iterator. If context.method was\n      // \"return\", allow the original .return call to continue in the\n      // outer generator.\n      if (context.method !== \"return\") {\n        context.method = \"next\";\n        context.arg = undefined;\n      }\n\n    } else {\n      // Re-yield the result returned by the delegate method.\n      return info;\n    }\n\n    // The delegate iterator is finished, so forget it and continue with\n    // the outer generator.\n    context.delegate = null;\n    return ContinueSentinel;\n  }\n\n  // Define Generator.prototype.{next,throw,return} in terms of the\n  // unified ._invoke helper method.\n  defineIteratorMethods(Gp);\n\n  define(Gp, toStringTagSymbol, \"Generator\");\n\n  // A Generator should always return itself as the iterator object when the\n  // @@iterator function is called on it. Some browsers' implementations of the\n  // iterator prototype chain incorrectly implement this, causing the Generator\n  // object to not be returned from this call. This ensures that doesn't happen.\n  // See https://github.com/facebook/regenerator/issues/274 for more details.\n  define(Gp, iteratorSymbol, function() {\n    return this;\n  });\n\n  define(Gp, \"toString\", function() {\n    return \"[object Generator]\";\n  });\n\n  function pushTryEntry(locs) {\n    var entry = { tryLoc: locs[0] };\n\n    if (1 in locs) {\n      entry.catchLoc = locs[1];\n    }\n\n    if (2 in locs) {\n      entry.finallyLoc = locs[2];\n      entry.afterLoc = locs[3];\n    }\n\n    this.tryEntries.push(entry);\n  }\n\n  function resetTryEntry(entry) {\n    var record = entry.completion || {};\n    record.type = \"normal\";\n    delete record.arg;\n    entry.completion = record;\n  }\n\n  function Context(tryLocsList) {\n    // The root entry object (effectively a try statement without a catch\n    // or a finally block) gives us a place to store values thrown from\n    // locations where there is no enclosing try statement.\n    this.tryEntries = [{ tryLoc: \"root\" }];\n    tryLocsList.forEach(pushTryEntry, this);\n    this.reset(true);\n  }\n\n  exports.keys = function(object) {\n    var keys = [];\n    for (var key in object) {\n      keys.push(key);\n    }\n    keys.reverse();\n\n    // Rather than returning an object with a next method, we keep\n    // things simple and return the next function itself.\n    return function next() {\n      while (keys.length) {\n        var key = keys.pop();\n        if (key in object) {\n          next.value = key;\n          next.done = false;\n          return next;\n        }\n      }\n\n      // To avoid creating an additional object, we just hang the .value\n      // and .done properties off the next function object itself. This\n      // also ensures that the minifier will not anonymize the function.\n      next.done = true;\n      return next;\n    };\n  };\n\n  function values(iterable) {\n    if (iterable) {\n      var iteratorMethod = iterable[iteratorSymbol];\n      if (iteratorMethod) {\n        return iteratorMethod.call(iterable);\n      }\n\n      if (typeof iterable.next === \"function\") {\n        return iterable;\n      }\n\n      if (!isNaN(iterable.length)) {\n        var i = -1, next = function next() {\n          while (++i < iterable.length) {\n            if (hasOwn.call(iterable, i)) {\n              next.value = iterable[i];\n              next.done = false;\n              return next;\n            }\n          }\n\n          next.value = undefined;\n          next.done = true;\n\n          return next;\n        };\n\n        return next.next = next;\n      }\n    }\n\n    // Return an iterator with no values.\n    return { next: doneResult };\n  }\n  exports.values = values;\n\n  function doneResult() {\n    return { value: undefined, done: true };\n  }\n\n  Context.prototype = {\n    constructor: Context,\n\n    reset: function(skipTempReset) {\n      this.prev = 0;\n      this.next = 0;\n      // Resetting context._sent for legacy support of Babel's\n      // function.sent implementation.\n      this.sent = this._sent = undefined;\n      this.done = false;\n      this.delegate = null;\n\n      this.method = \"next\";\n      this.arg = undefined;\n\n      this.tryEntries.forEach(resetTryEntry);\n\n      if (!skipTempReset) {\n        for (var name in this) {\n          // Not sure about the optimal order of these conditions:\n          if (name.charAt(0) === \"t\" &&\n              hasOwn.call(this, name) &&\n              !isNaN(+name.slice(1))) {\n            this[name] = undefined;\n          }\n        }\n      }\n    },\n\n    stop: function() {\n      this.done = true;\n\n      var rootEntry = this.tryEntries[0];\n      var rootRecord = rootEntry.completion;\n      if (rootRecord.type === \"throw\") {\n        throw rootRecord.arg;\n      }\n\n      return this.rval;\n    },\n\n    dispatchException: function(exception) {\n      if (this.done) {\n        throw exception;\n      }\n\n      var context = this;\n      function handle(loc, caught) {\n        record.type = \"throw\";\n        record.arg = exception;\n        context.next = loc;\n\n        if (caught) {\n          // If the dispatched exception was caught by a catch block,\n          // then let that catch block handle the exception normally.\n          context.method = \"next\";\n          context.arg = undefined;\n        }\n\n        return !! caught;\n      }\n\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        var record = entry.completion;\n\n        if (entry.tryLoc === \"root\") {\n          // Exception thrown outside of any try block that could handle\n          // it, so set the completion value of the entire function to\n          // throw the exception.\n          return handle(\"end\");\n        }\n\n        if (entry.tryLoc <= this.prev) {\n          var hasCatch = hasOwn.call(entry, \"catchLoc\");\n          var hasFinally = hasOwn.call(entry, \"finallyLoc\");\n\n          if (hasCatch && hasFinally) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            } else if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else if (hasCatch) {\n            if (this.prev < entry.catchLoc) {\n              return handle(entry.catchLoc, true);\n            }\n\n          } else if (hasFinally) {\n            if (this.prev < entry.finallyLoc) {\n              return handle(entry.finallyLoc);\n            }\n\n          } else {\n            throw new Error(\"try statement without catch or finally\");\n          }\n        }\n      }\n    },\n\n    abrupt: function(type, arg) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc <= this.prev &&\n            hasOwn.call(entry, \"finallyLoc\") &&\n            this.prev < entry.finallyLoc) {\n          var finallyEntry = entry;\n          break;\n        }\n      }\n\n      if (finallyEntry &&\n          (type === \"break\" ||\n           type === \"continue\") &&\n          finallyEntry.tryLoc <= arg &&\n          arg <= finallyEntry.finallyLoc) {\n        // Ignore the finally entry if control is not jumping to a\n        // location outside the try/catch block.\n        finallyEntry = null;\n      }\n\n      var record = finallyEntry ? finallyEntry.completion : {};\n      record.type = type;\n      record.arg = arg;\n\n      if (finallyEntry) {\n        this.method = \"next\";\n        this.next = finallyEntry.finallyLoc;\n        return ContinueSentinel;\n      }\n\n      return this.complete(record);\n    },\n\n    complete: function(record, afterLoc) {\n      if (record.type === \"throw\") {\n        throw record.arg;\n      }\n\n      if (record.type === \"break\" ||\n          record.type === \"continue\") {\n        this.next = record.arg;\n      } else if (record.type === \"return\") {\n        this.rval = this.arg = record.arg;\n        this.method = \"return\";\n        this.next = \"end\";\n      } else if (record.type === \"normal\" && afterLoc) {\n        this.next = afterLoc;\n      }\n\n      return ContinueSentinel;\n    },\n\n    finish: function(finallyLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.finallyLoc === finallyLoc) {\n          this.complete(entry.completion, entry.afterLoc);\n          resetTryEntry(entry);\n          return ContinueSentinel;\n        }\n      }\n    },\n\n    \"catch\": function(tryLoc) {\n      for (var i = this.tryEntries.length - 1; i >= 0; --i) {\n        var entry = this.tryEntries[i];\n        if (entry.tryLoc === tryLoc) {\n          var record = entry.completion;\n          if (record.type === \"throw\") {\n            var thrown = record.arg;\n            resetTryEntry(entry);\n          }\n          return thrown;\n        }\n      }\n\n      // The context.catch method must only be called with a location\n      // argument that corresponds to a known catch block.\n      throw new Error(\"illegal catch attempt\");\n    },\n\n    delegateYield: function(iterable, resultName, nextLoc) {\n      this.delegate = {\n        iterator: values(iterable),\n        resultName: resultName,\n        nextLoc: nextLoc\n      };\n\n      if (this.method === \"next\") {\n        // Deliberately forget the last sent value so that we don't\n        // accidentally pass it on to the delegate.\n        this.arg = undefined;\n      }\n\n      return ContinueSentinel;\n    }\n  };\n\n  // Regardless of whether this script is executing as a CommonJS module\n  // or not, return the runtime object so that we can declare the variable\n  // regeneratorRuntime in the outer scope, which allows this module to be\n  // injected easily by `bin/regenerator --include-runtime script.js`.\n  return exports;\n\n}(\n  // If this script is executing as a CommonJS module, use module.exports\n  // as the regeneratorRuntime namespace. Otherwise create a new empty\n  // object. Either way, the resulting object will be used to initialize\n  // the regeneratorRuntime variable at the top of this file.\n  typeof module === \"object\" ? module.exports : {}\n));\n\ntry {\n  regeneratorRuntime = runtime;\n} catch (accidentalStrictMode) {\n  // This module should not be running in strict mode, so the above\n  // assignment should always work unless something is misconfigured. Just\n  // in case runtime.js accidentally runs in strict mode, in modern engines\n  // we can explicitly access globalThis. In older engines we can escape\n  // strict mode using a global Function call. This could conceivably fail\n  // if a Content Security Policy forbids using Function, but in that case\n  // the proper solution is to fix the accidental strict mode problem. If\n  // you've misconfigured your bundler to force strict mode and applied a\n  // CSP to forbid Function, and you're not willing to fix either of those\n  // problems, please detail your unique predicament in a GitHub issue.\n  if (typeof globalThis === \"object\") {\n    globalThis.regeneratorRuntime = runtime;\n  } else {\n    Function(\"r\", \"regeneratorRuntime = r\")(runtime);\n  }\n}\n","import type { GraphQLError, IntrospectionQuery } from 'graphql';\nimport {\n  PARTIAL_AUTHENTICATION_TOKEN_RESPONSE,\n  EXPLORER_QUERY_MUTATION_RESPONSE,\n  HANDSHAKE_RESPONSE,\n  SCHEMA_ERROR,\n  SCHEMA_RESPONSE,\n} from './constants';\nimport type { JSONValue } from '../types';\nimport { getEmbeddedSandboxBaseUrl } from '../embeddedSandbox/EmbeddedSandbox';\n\nexport type HandleRequest = (\n  endpointUrl: string,\n  options: Omit<RequestInit, 'headers'> & { headers: Record<string, string> }\n) => Promise<Response>;\n\n// Helper function that adds content-type: application/json\n// to each request's headers if not present\nfunction getHeadersWithContentType(\n  headers: Record<string, string> | undefined\n) {\n  const headersWithContentType = headers ?? {};\n  if (\n    Object.keys(headersWithContentType).every(\n      (key) => key.toLowerCase() !== 'content-type'\n    )\n  ) {\n    headersWithContentType['content-type'] = 'application/json';\n  }\n  return headersWithContentType;\n}\n\nexport function sendPostMessageToEmbed({\n  message,\n  embeddedIFrameElement,\n  embedUrl,\n}: {\n  message: OutgoingEmbedMessage;\n  embeddedIFrameElement: HTMLIFrameElement;\n  embedUrl: string;\n}) {\n  embeddedIFrameElement?.contentWindow?.postMessage(message, embedUrl);\n}\n\ntype Error = {\n  message: string;\n  stack?: string;\n};\n\nexport type OutgoingEmbedMessage =\n  | {\n      name: typeof SCHEMA_ERROR;\n      error?: string;\n      errors?: Array<GraphQLError>;\n    }\n  | {\n      name: typeof SCHEMA_RESPONSE;\n      schema: IntrospectionQuery | string | undefined;\n    }\n  | {\n      name: typeof HANDSHAKE_RESPONSE;\n      graphRef?: string;\n      inviteToken?: string;\n      accountId?: string;\n    }\n  | {\n      name: typeof PARTIAL_AUTHENTICATION_TOKEN_RESPONSE;\n      partialToken?: string;\n    }\n  | {\n      name: typeof EXPLORER_QUERY_MUTATION_RESPONSE;\n      operationId: string;\n      response: {\n        data?: JSONValue;\n        error?: Error;\n        errors?: [Error];\n        status?: number;\n        headers?: Headers;\n      };\n    };\n\n// TODO(Maya) uncomment and switch to MessageEvent as a generic when tsdx supports Typescript V4.\n// https://github.com/jaredpalmer/tsdx/issues/926\nexport type IncomingEmbedMessage = MessageEvent;\n// | MessageEvent<{\n//     name: typeof EXPLORER_LISTENING_FOR_HANDSHAKE;\n//   }>\n// | MessageEvent<{\n//     name: typeof EXPLORER_QUERY_MUTATION_REQUEST;\n//     operationName?: string;\n//     operation: string;\n//     operationId: string;\n//     variables?: Record<string, string>;\n//     headers?: Record<string, string>;\n//     sandboxEndpointUrl?: string;\n//   }>\n// | MessageEvent<{\n//     name: typeof EXPLORER_LISTENING_FOR_SCHEMA;\n//   }>\n// | MessageEvent<{\n//     name: typeof SET_PARTIAL_AUTHENTICATION_TOKEN_FOR_PARENT;\n//     key: string;\n//     partialToken: string;\n//   }>\n// | MessageEvent<{\n//     name: typeof EXPLORER_LISTENING_FOR_PARTIAL_TOKEN;\n//     localStorageKey?: string;\n//   }>\n// | MessageEvent<{\n//     name: typeof INTROSPECTION_QUERY_WITH_HEADERS;\n//     introspectionRequestBody: string;\n//     introspectionRequestHeaders: Record<string, string>;\n//     sandboxEndpointUrl?: string;\n//   }>;\n\nexport function executeOperation({\n  endpointUrl,\n  handleRequest,\n  operation,\n  operationName,\n  variables,\n  headers,\n  embeddedIFrameElement,\n  operationId,\n  embedUrl,\n}: {\n  endpointUrl: string;\n  handleRequest: HandleRequest;\n  operation: string;\n  operationId: string;\n  embeddedIFrameElement: HTMLIFrameElement;\n  operationName: string | undefined;\n  variables?: Record<string, string>;\n  headers?: Record<string, string>;\n  embedUrl: string;\n}) {\n  return handleRequest(endpointUrl, {\n    method: 'POST',\n    headers: getHeadersWithContentType(headers),\n    body: JSON.stringify({\n      query: operation,\n      variables,\n      operationName,\n    }),\n  })\n    .then(async (response) => {\n      const json = await response.json();\n\n      const responseHeaders: Record<string, string> = {};\n      response.headers.forEach((value, key) => {\n        responseHeaders[key] = value;\n      });\n\n      sendPostMessageToEmbed({\n        message: {\n          // Include the same operation ID in the response message's name\n          // so the Explorer knows which operation it's associated with\n          name: EXPLORER_QUERY_MUTATION_RESPONSE,\n          operationId,\n          response: {\n            ...json,\n            status: response.status,\n            headers: responseHeaders,\n          },\n        },\n        embeddedIFrameElement,\n        embedUrl,\n      });\n    })\n    .catch((response) => {\n      sendPostMessageToEmbed({\n        message: {\n          // Include the same operation ID in the response message's name\n          // so the Explorer knows which operation it's associated with\n          name: EXPLORER_QUERY_MUTATION_RESPONSE,\n          operationId,\n          response: {\n            error: {\n              message: response.message,\n              ...(response.stack ? { stack: response.stack } : {}),\n            },\n          },\n        },\n        embeddedIFrameElement,\n        embedUrl,\n      });\n    });\n}\n\nexport function executeIntrospectionRequest({\n  endpointUrl,\n  headers,\n  introspectionRequestBody,\n  embeddedIFrameElement,\n  apolloStudioEnv,\n}: {\n  endpointUrl: string;\n  embeddedIFrameElement: HTMLIFrameElement;\n  headers?: Record<string, string>;\n  introspectionRequestBody: string;\n  apolloStudioEnv: 'staging' | 'prod';\n}) {\n  const embedUrl = getEmbeddedSandboxBaseUrl(apolloStudioEnv);\n  const { query, operationName } = JSON.parse(introspectionRequestBody) as {\n    query: string;\n    operationName: string;\n  };\n  return fetch(endpointUrl, {\n    method: 'POST',\n    headers: getHeadersWithContentType(headers),\n    body: JSON.stringify({\n      query,\n      operationName,\n    }),\n  })\n    .then((response) => response.json())\n    .then((response) => {\n      if (response.errors && response.errors.length) {\n        sendPostMessageToEmbed({\n          message: {\n            // Include the same operation ID in the response message's name\n            // so the Explorer knows which operation it's associated with\n            name: SCHEMA_ERROR,\n            errors: response.errors,\n          },\n          embeddedIFrameElement,\n          embedUrl,\n        });\n      }\n      sendPostMessageToEmbed({\n        message: {\n          // Include the same operation ID in the response message's name\n          // so the Explorer knows which operation it's associated with\n          name: SCHEMA_RESPONSE,\n          schema: response.data,\n        },\n        embeddedIFrameElement,\n        embedUrl,\n      });\n    })\n    .catch((error) => {\n      sendPostMessageToEmbed({\n        message: {\n          // Include the same operation ID in the response message's name\n          // so the Explorer knows which operation it's associated with\n          name: SCHEMA_ERROR,\n          error: error,\n        },\n        embeddedIFrameElement,\n        embedUrl,\n      });\n    });\n}\n","import type { IntrospectionQuery } from 'graphql';\nimport {\n  SET_PARTIAL_AUTHENTICATION_TOKEN_FOR_PARENT,\n  EXPLORER_LISTENING_FOR_HANDSHAKE,\n  EXPLORER_LISTENING_FOR_SCHEMA,\n  EXPLORER_QUERY_MUTATION_REQUEST,\n  HANDSHAKE_RESPONSE,\n  EXPLORER_LISTENING_FOR_PARTIAL_TOKEN,\n  PARTIAL_AUTHENTICATION_TOKEN_RESPONSE,\n} from '../helpers/constants';\nimport {\n  executeOperation,\n  HandleRequest,\n  IncomingEmbedMessage,\n  sendPostMessageToEmbed,\n} from '../helpers/postMessageRelayHelpers';\nimport { getEmbeddedExplorerBaseUrl } from './EmbeddedExplorer';\n\nexport function setupEmbedRelay({\n  endpointUrl,\n  handleRequest,\n  embeddedExplorerIFrameElement,\n  updateSchemaInEmbed,\n  schema,\n  graphRef,\n  autoInviteOptions,\n  apolloStudioEnv,\n}: {\n  endpointUrl: string;\n  handleRequest: HandleRequest;\n  embeddedExplorerIFrameElement: HTMLIFrameElement;\n  updateSchemaInEmbed: ({\n    schema,\n  }: {\n    schema: string | IntrospectionQuery | undefined;\n  }) => void;\n  schema?: string | IntrospectionQuery | undefined;\n  graphRef?: string | undefined;\n  autoInviteOptions?: {\n    accountId: string;\n    inviteToken: string;\n  };\n  apolloStudioEnv: 'staging' | 'prod';\n}) {\n  const embedUrl = getEmbeddedExplorerBaseUrl(apolloStudioEnv);\n\n  // Callback definition\n  const onPostMessageReceived = (event: IncomingEmbedMessage) => {\n    const data = event.data;\n    // When embed connects, send a handshake message\n    if (data.name === EXPLORER_LISTENING_FOR_HANDSHAKE) {\n      sendPostMessageToEmbed({\n        message: {\n          name: HANDSHAKE_RESPONSE,\n          graphRef,\n          inviteToken: autoInviteOptions?.inviteToken,\n          accountId: autoInviteOptions?.accountId,\n        },\n        embeddedIFrameElement: embeddedExplorerIFrameElement,\n        embedUrl,\n      });\n    }\n\n    // When the embed authenticates, save the partial token in local storage\n    if (data.name === SET_PARTIAL_AUTHENTICATION_TOKEN_FOR_PARENT) {\n      const partialEmbedApiKeysString = window.localStorage.getItem(\n        'apolloStudioEmbeddedExplorerEncodedApiKey'\n      );\n      const partialEmbedApiKeys = partialEmbedApiKeysString\n        ? JSON.parse(partialEmbedApiKeysString)\n        : {};\n      partialEmbedApiKeys[data.localStorageKey] = data.partialToken;\n      window.localStorage.setItem(\n        'apolloStudioEmbeddedExplorerEncodedApiKey',\n        JSON.stringify(partialEmbedApiKeys)\n      );\n    }\n\n    if (\n      data.name === EXPLORER_LISTENING_FOR_PARTIAL_TOKEN &&\n      data.localStorageKey\n    ) {\n      const partialEmbedApiKeysString = window.localStorage.getItem(\n        'apolloStudioEmbeddedExplorerEncodedApiKey'\n      );\n      const partialEmbedApiKeys = partialEmbedApiKeysString\n        ? JSON.parse(partialEmbedApiKeysString)\n        : {};\n      if (partialEmbedApiKeys && partialEmbedApiKeys[data.localStorageKey]) {\n        sendPostMessageToEmbed({\n          message: {\n            name: PARTIAL_AUTHENTICATION_TOKEN_RESPONSE,\n            partialToken: partialEmbedApiKeys[data.localStorageKey],\n          },\n          embeddedIFrameElement: embeddedExplorerIFrameElement,\n          embedUrl,\n        });\n      }\n    }\n\n    // Embedded Explorer sends us a PM when it is ready for a schema\n    if (\n      'name' in data &&\n      data.name === EXPLORER_LISTENING_FOR_SCHEMA &&\n      !!schema\n    ) {\n      updateSchemaInEmbed({ schema });\n    }\n\n    // Check to see if the posted message indicates that the user is\n    // executing a query or mutation or subscription in the Explorer\n    const isQueryOrMutation =\n      'name' in data && data.name === EXPLORER_QUERY_MUTATION_REQUEST;\n\n    // If the user is executing a query or mutation or subscription...\n    if (isQueryOrMutation && data.operation && data.operationId) {\n      // Extract the operation details from the event.data object\n      const { operation, operationId, operationName, variables, headers } =\n        data;\n      if (isQueryOrMutation) {\n        executeOperation({\n          endpointUrl,\n          handleRequest,\n          operation,\n          operationName,\n          variables,\n          headers,\n          embeddedIFrameElement: embeddedExplorerIFrameElement,\n          operationId,\n          embedUrl,\n        });\n      }\n    }\n  };\n  // Execute our callback whenever window.postMessage is called\n  window.addEventListener('message', onPostMessageReceived);\n  return {\n    dispose: () => window.removeEventListener('message', onPostMessageReceived),\n  };\n}\n","import type { IntrospectionQuery } from 'graphql';\nimport {\n  EMBEDDABLE_EXPLORER_URL,\n  EMBEDDABLE_EXPLORER_URL_STAGING,\n  IFRAME_DOM_ID,\n  SCHEMA_RESPONSE,\n} from '../helpers/constants';\nimport {\n  HandleRequest,\n  sendPostMessageToEmbed,\n} from '../helpers/postMessageRelayHelpers';\nimport { setupEmbedRelay } from './setupEmbedRelay';\n\nexport interface BaseEmbeddableExplorerOptions {\n  target: string | HTMLElement; // HTMLElement is to accomodate people who might prefer to pass in a ref\n\n  initialState?: {\n    document?: string;\n    variables?: Record<string, any>;\n    headers?: Record<string, string>;\n    displayOptions: {\n      docsPanelState?: 'open' | 'closed'; // default to 'open',\n      showHeadersAndEnvVars?: boolean; // default to `false`\n      theme?: 'dark' | 'light';\n    };\n  };\n  persistExplorerState?: boolean; // defaults to 'false'\n\n  endpointUrl: string;\n\n  // optional. defaults to `return fetch(url, fetchOptions)`\n  handleRequest?: HandleRequest;\n  // If this object has values for `inviteToken` and `accountId`,\n  // any users who can see your embeddable Explorer are automatically\n  // invited to the account your graph is under with the role specified by the `inviteToken`.\n  autoInviteOptions?: {\n    accountId: string;\n    inviteToken: string;\n  };\n\n  /**\n   * Only for Apollo team testing\n   */\n  apolloStudioEnv?: 'staging' | 'prod';\n}\n\nexport function getEmbeddedExplorerBaseUrl(\n  apolloStudioEnv: 'staging' | 'prod' | undefined\n) {\n  return apolloStudioEnv === 'staging'\n    ? EMBEDDABLE_EXPLORER_URL_STAGING\n    : EMBEDDABLE_EXPLORER_URL;\n}\n\ninterface EmbeddableExplorerOptionsWithSchema\n  extends BaseEmbeddableExplorerOptions {\n  schema: string | IntrospectionQuery;\n  graphRef?: never;\n}\n\ninterface EmbeddableExplorerOptionsWithGraphRef\n  extends BaseEmbeddableExplorerOptions {\n  graphRef: string;\n  schema?: never;\n}\n\nexport type EmbeddableExplorerOptions =\n  | EmbeddableExplorerOptionsWithSchema\n  | EmbeddableExplorerOptionsWithGraphRef;\n\nlet idCounter = 0;\n\nexport class EmbeddedExplorer {\n  options: EmbeddableExplorerOptions;\n  handleRequest: HandleRequest;\n  embeddedExplorerURL: string;\n  embeddedExplorerIFrameElement: HTMLIFrameElement;\n  uniqueEmbedInstanceId: number;\n  private disposable: { dispose: () => void };\n  constructor(options: EmbeddableExplorerOptions) {\n    this.options = options;\n    this.validateOptions();\n    this.handleRequest = this.options.handleRequest ?? fetch;\n    this.uniqueEmbedInstanceId = idCounter++;\n    this.embeddedExplorerURL = this.getEmbeddedExplorerURL();\n    this.embeddedExplorerIFrameElement = this.injectEmbed();\n    this.disposable = setupEmbedRelay({\n      embeddedExplorerIFrameElement: this.embeddedExplorerIFrameElement,\n      endpointUrl: this.options.endpointUrl,\n      handleRequest: this.handleRequest,\n      updateSchemaInEmbed: this.updateSchemaInEmbed.bind(this),\n      schema: 'schema' in this.options ? this.options.schema : undefined,\n      graphRef: 'graphRef' in this.options ? this.options.graphRef : undefined,\n      autoInviteOptions: this.options.autoInviteOptions,\n      apolloStudioEnv: this.options.apolloStudioEnv || 'prod',\n    });\n  }\n\n  dispose() {\n    // remove the dom element\n    document\n      .getElementById(IFRAME_DOM_ID(this.uniqueEmbedInstanceId))\n      ?.remove();\n    // remove the listener\n    this.disposable.dispose();\n  }\n\n  injectEmbed() {\n    let element;\n    const { target } = this.options;\n\n    if (typeof target === 'string') {\n      element = document?.querySelector?.(target);\n    } else {\n      element = target;\n    }\n    const iframeElement = document.createElement('iframe');\n    iframeElement.src = this.embeddedExplorerURL;\n\n    iframeElement.id = IFRAME_DOM_ID(this.uniqueEmbedInstanceId);\n    iframeElement.setAttribute(\n      'style',\n      'height: 100%; width: 100%; border: none;'\n    );\n\n    element?.appendChild(iframeElement);\n\n    return iframeElement;\n  }\n\n  validateOptions() {\n    if (!this.options.target) {\n      throw new Error('\"target\" is required');\n    }\n\n    if (!this.options.handleRequest && !this.options.endpointUrl) {\n      throw new Error(\n        '`endpointUrl` is required unless you write a custom `handleRequest`'\n      );\n    }\n\n    if ('schema' in this.options && 'graphRef' in this.options) {\n      throw new Error(\n        'Both `schema` and `graphRef` cannot be set. You can either send your schema as an IntrospectionQuery or string via the `schema` field, or specifiy a public graphRef.'\n      );\n    }\n\n    if (!('schema' in this.options || 'graphRef' in this.options)) {\n      throw new Error('You must set either `schema` or `graphRef`.');\n    }\n  }\n\n  getEmbeddedExplorerURL = () => {\n    const { document, variables, headers, displayOptions } =\n      this.options.initialState || {};\n    const { persistExplorerState } = this.options;\n    const graphRef =\n      'graphRef' in this.options ? this.options.graphRef : undefined;\n    const queryParams = {\n      graphRef,\n      document: document ? encodeURIComponent(document) : undefined,\n      variables: variables\n        ? encodeURIComponent(JSON.stringify(variables))\n        : undefined,\n      headers: headers\n        ? encodeURIComponent(JSON.stringify(headers))\n        : undefined,\n      shouldPersistState: !!persistExplorerState,\n      sendRequestsFrom: 'parent',\n      docsPanelState: displayOptions?.docsPanelState ?? 'open',\n      showHeadersAndEnvVars: displayOptions?.showHeadersAndEnvVars !== false,\n      theme: displayOptions?.theme ?? 'dark',\n    };\n\n    const queryString = Object.entries(queryParams)\n      .filter(([_, value]) => value !== undefined)\n      .map(([key, value]) => `${key}=${value}`)\n      .join('&');\n    return `${getEmbeddedExplorerBaseUrl(\n      this.options.apolloStudioEnv\n    )}?${queryString}`;\n  };\n\n  updateSchemaInEmbed({\n    schema,\n  }: {\n    schema?: string | IntrospectionQuery | undefined;\n  }) {\n    sendPostMessageToEmbed({\n      message: {\n        name: SCHEMA_RESPONSE,\n        schema,\n      },\n      embeddedIFrameElement: this.embeddedExplorerIFrameElement,\n      embedUrl: getEmbeddedExplorerBaseUrl(this.options.apolloStudioEnv),\n    });\n  }\n}\n","import type { IntrospectionQuery } from 'graphql';\nimport React, { useEffect, useRef, useState } from 'react';\nimport {\n  BaseEmbeddableExplorerOptions,\n  EmbeddedExplorer,\n} from '../EmbeddedExplorer';\nimport useDeepCompareEffect from 'use-deep-compare-effect';\n\n// Need to extend from the base, b/c Omit<UnionType> doesn't carry over\n// the conditional never's established here\ninterface EmbeddableExplorerOptionsWithSchema\n  extends Omit<BaseEmbeddableExplorerOptions, 'target'> {\n  schema: string | IntrospectionQuery;\n  graphRef?: never;\n}\n\ninterface EmbeddableExplorerOptionsWithGraphRef\n  extends Omit<BaseEmbeddableExplorerOptions, 'target'> {\n  graphRef: string;\n  schema?: never;\n}\n\nexport type EmbeddableExplorerOptions =\n  | EmbeddableExplorerOptionsWithSchema\n  | EmbeddableExplorerOptionsWithGraphRef;\n\nexport function ApolloExplorerReact(\n  props: EmbeddableExplorerOptions & { className?: string }\n) {\n  const [wrapperElement, setWrapperElement] = useState<HTMLDivElement | null>();\n\n  const currentEmbedRef = useRef<EmbeddedExplorer>();\n\n  useDeepCompareEffect(\n    () => {\n      if (!wrapperElement) return;\n      currentEmbedRef.current?.dispose();\n\n      currentEmbedRef.current = new EmbeddedExplorer({\n        ...props,\n        target: wrapperElement,\n      });\n\n      return () => currentEmbedRef.current?.dispose();\n    },\n    // we purposely exclude schema here\n    // when the schema changes we don't want to tear down and render a new embed,\n    // we just want to pm the new schema to the embed in the above useEffect\n    [\n      props.endpointUrl,\n      props.handleRequest,\n      props.initialState,\n      props.persistExplorerState,\n      props.graphRef,\n      wrapperElement,\n    ]\n  );\n\n  useEffect(() => {\n    if (props.schema)\n      currentEmbedRef.current?.updateSchemaInEmbed({ schema: props.schema });\n  }, [props.schema, currentEmbedRef.current]);\n\n  return (\n    <div\n      className={props.className}\n      ref={(element) => {\n        setWrapperElement(element);\n      }}\n    />\n  );\n}\n"],"names":["EMBEDDABLE_EXPLORER_URL_STAGING","EMBEDDABLE_EXPLORER_URL","EXPLORER_LISTENING_FOR_SCHEMA","SCHEMA_RESPONSE","EXPLORER_QUERY_MUTATION_REQUEST","EXPLORER_QUERY_MUTATION_RESPONSE","IFRAME_DOM_ID","uniqueId","EXPLORER_LISTENING_FOR_HANDSHAKE","HANDSHAKE_RESPONSE","SET_PARTIAL_AUTHENTICATION_TOKEN_FOR_PARENT","EXPLORER_LISTENING_FOR_PARTIAL_TOKEN","PARTIAL_AUTHENTICATION_TOKEN_RESPONSE","undefined","getHeadersWithContentType","headers","headersWithContentType","Object","keys","every","key","toLowerCase","sendPostMessageToEmbed","message","embeddedIFrameElement","embedUrl","contentWindow","postMessage","executeOperation","endpointUrl","handleRequest","operation","operationName","variables","operationId","method","body","JSON","stringify","query","then","response","json","responseHeaders","forEach","value","name","status","error","stack","setupEmbedRelay","embeddedExplorerIFrameElement","updateSchemaInEmbed","schema","graphRef","autoInviteOptions","apolloStudioEnv","getEmbeddedExplorerBaseUrl","onPostMessageReceived","event","data","inviteToken","accountId","partialEmbedApiKeysString","window","localStorage","getItem","partialEmbedApiKeys","parse","localStorageKey","partialToken","setItem","isQueryOrMutation","addEventListener","dispose","removeEventListener","idCounter","EmbeddedExplorer","options","initialState","document","displayOptions","persistExplorerState","queryParams","encodeURIComponent","shouldPersistState","sendRequestsFrom","docsPanelState","showHeadersAndEnvVars","theme","queryString","entries","filter","map","join","validateOptions","fetch","uniqueEmbedInstanceId","embeddedExplorerURL","getEmbeddedExplorerURL","injectEmbed","disposable","bind","getElementById","remove","element","target","querySelector","iframeElement","createElement","src","id","setAttribute","appendChild","Error","ApolloExplorerReact","props","useState","wrapperElement","setWrapperElement","currentEmbedRef","useRef","useDeepCompareEffect","current","useEffect","React","className","ref"],"mappings":"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"}